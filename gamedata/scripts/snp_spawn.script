-- snp спавн врагов, функции рестрикторов и прочее

function snp_uagro1_tp1()
	kostya_dialog.delete_teleport("snp_uagro1_tp1")
end

function n_inventory_box_kordon1()
	local p={
		{position={x=-264.70471191406,y=-9.2020301818848,z=-54.91637802124},gv=66,lv=4755},
		{position={x=-275.99215698242,y=-7.1646323204041,z=-43.942119598389},gv=66,lv=1371},
		{position={x=-270.56866455078,y=-11.252721786499,z=-73.684814453125},gv=10,lv=2770},
		{position={x=-261.78771972656,y=-9.9591236114502,z=-65.430397033691},gv=10,lv=5717}
	}
    local a
	for i=1,#p do
		a = p[i]
		alife():create("snp_kordon2",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
	end
end

function n_inventory_box_vp1()
	local p={
		{position={x=-27.693408966064,y=45.43708419799805,z=181.91142272949},gv=3757,lv=160812},
		{position={x=-27.801246643066,y=45.42045074701309,z=207.37083435059},gv=3757,lv=160848},
		{position={x=284.06558227539,y=45.30651679635048,z=186.90484619141},gv=3769,lv=472948},
		{position={x=281.26049804688,y=45.37802630662918,z=209.3080291748},gv=3769,lv=472033},
		{position={x=184.49374389648,y=200.42720878124237,z=-3.44810795784},gv=3768,lv=414917},
		{position={x=137.35902404785,y=200.51122176647186,z=2.4388546943665},gv=3767,lv=365668}
	}
    local a
	for i=1,#p do
		a = p[i]
		amk_mod.spawn_military_tech_pack(alife():create("helicopter",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv), "helicopter", "scripts\\snp\\heli_vp"..tostring(i)..".ltx")
	end
end

function n_inventory_box_vp1_4()
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ФЕНРИР:".."\\n".."%c[255,255,128,128]Молодец, правильно идёшь. Бонусный тайник на этой крыше.".."\n", nil, nil, 30000)
	alife():create("n_inventory_box_vp1_4",vector():set(57.300216674805,13.988676071167,374.66049194336),316308,3760)
end

function n_inventory_box_vp6()
	local p={
		{position={x=145.0111541748,y=-0.4814181625843,z=-237.03538513184},gv=3765,lv=374221},
		{position={x=202.45036315918,y=-0.43884634971619,z=-265.34649658203},gv=3765,lv=430370}
	}
    local a
	for i=1,#p do
		a = p[i]
		amk_mod.spawn_military_tech_pack(alife():create("vehicle_btr",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv), "vehicle_btr", "scripts\\snp\\btr.ltx")
	end
	p={
		{position={x=172.66348266602,y=-0.50744414329529,z=-269.77966308594},gv=3765,lv=402222},
		{position={x=183.68919372559,y=-0.36860734224319,z=-270.01718139648},gv=3765,lv=413316},
		{position={x=191.1036529541,y=-0.44500151276588,z=-269.90469360352},gv=3765,lv=420901},
		{position={x=197.04556274414,y=-0.47210308909416,z=-261.15753173828},gv=3765,lv=425619},
		{position={x=197.58959960938,y=-0.45024278759956,z=-252.13032531738},gv=3765,lv=426215},
		{position={x=180.94439697266,y=-0.47457754611969,z=-229.30244445801},gv=3765,lv=410647},
		{position={x=169.29411315918,y=-0.50891864299774,z=-249.71199035645},gv=3765,lv=398670},
		{position={x=194.73753356934,y=-0.44533509016037,z=-235.09240722656},gv=3765,lv=423901},
		{position={x=199.1434173584,y=-0.44491130113602,z=-250.22514343262},gv=3765,lv=427420}
	}
	for i=1,#p do
		a = p[i]
		alife():create("snp_kordon2",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
	end
end

function n_inventory_box_vp7()
	db.actor:give_info_portion("snpt_kl1_found2")
end

function n_inventory_box_limansk1()
	local p={
		{position={x=3.3745708465576,y=13.267841339111,z=203.81823730469},gv=3020,lv=26797},
		{position={x=-6.1875462532043,y=13.080642700195,z=195.36911010742},gv=3010,lv=21733},
		{position={x=-18.557909011841,y=13.135409355164,z=192.96270751953},gv=3010,lv=15973},
		{position={x=-32.283668518066,y=12.971523284912,z=197.10067749023},gv=3010,lv=9646},
		{position={x=-19.543018341064,y=12.972764015198,z=210.21685791016},gv=3020,lv=15620}
	}
    local a
	for i=1,#p do
		a = p[i]
		alife():create("m_controller_normal",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
	end
end
function n_inventory_box_limansk2_1()
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ФЕНРИР:".."\\n".."%c[255,255,128,128]Молодец, брат, правильно ищешь! Лезь выше и иди к краю антенны.".."\n", nil, nil, 30000)
	amk.remove_item_from_inventory_by_name("snp_note15",db.actor)
	snp.create_restrictor(vector():set(67.899971008301,39.56356048584,178.4150390625),51783,3020,1,"snp_spawn.n_inventory_box_limansk2_2")
end
function n_inventory_box_limansk2_2()
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ФЕНРИР:".."\\n".."%c[255,255,128,128]Прыгай на столб.".."\n", nil, nil, 10000)
	snp.create_item_and_restrictor("n_inventory_box_limansk2_2",vector():set(57.206985473633,24.107192993164,169.13726806641),51783,3020)
end
function n_inventory_box_limansk2_3()
	alife():create("snp_limansk1",vector():set(39.022384643555,24.745021820068,184.55847167969),47330,3003)
	alife():create("snp_limansk2",vector():set(9.9997606277466,20.859302520752,179.06695556641),30857,3003)
	alife():create("snp_limansk3",vector():set(35.611030578613,20.880447387695,178.54489135742),45621,3003)
	alife():create("snp_limansk4",vector():set(38.303115844727,17.085302352905,187.1646270752),47343,3010)
end
function n_inventory_box_limansk3()
	kostya_dialog.create_teleport("tele_limansk3_1",vector():set(-60.771114349365,0.30335474014282,-138.40234375),1233,2996)
	kostya_dialog.create_teleport("tele_limansk3_2",vector():set(-60.782455444336,0.30773329734802,-141.80180358887),1229,2996)
end
function tele_limansk3()
	alife():create("proper70_limansk",vector():set(-65.693557739258,-0.4403969347477,-129.74189758301),782,2996)
	kostya_dialog.delete_teleport("tele_limansk3_1")
	kostya_dialog.delete_teleport("tele_limansk3_2")
end
function tele_limansk4()
	alife():create("n_inventory_box_limansk4",vector():set(-7.2269525527954,-4.1922025680542,-155.31819152832),20987,2993)
	kostya_dialog.delete_teleport("tele_limansk4")
end
function n_inventory_box_limansk4()
	local p={
		{position={x=-14.807188987732,y=-4.1903643608093,z=-156.5671081543},gv=2993,lv=17807},
		{position={x=-14.18200302124,y=-4.1908979415894,z=-147.45446777344},gv=2993,lv=18164}
	}
    local a
	for i=1,#p do
		a = p[i]
		for j=1,1 do
			alife():create("burer_strong",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
			alife():create("m_poltergeist_dd",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
			alife():create("m_controller_act",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
		end
	end
end
function tele_limansk5()
	kostya_dialog.delete_teleport("tele_limansk5")
	alife():create("n_inventory_box_limansk5",vector():set(48.121170043945,20.80558013916,329.69134521484),51163,3023)
	kostya_dialog.create_teleport("tele_sarcofag1",vector():set(53.813819885254,17.827913284302,14.805692672729),9145,2439)
	alife():create("n_inventory_box_sarcofag2",vector():set(74.085433959961,-0.030018299818039,0.020577875897288),10553,2431)
end

function tele_sarcofag1()
	kostya_dialog.delete_teleport("tele_sarcofag1")
	snp.play_snd_rnd_ratchant()
end

-- алмазные черепа
function tele_marsh1()
	db.actor:give_info_portion("no_marsh_radiation")
end
function tele_marsh2()
	db.actor:disable_info_portion("no_marsh_radiation")
	kostya_dialog.delete_teleport("tele_marsh2")
end
function suslov_marsh_sms1()
	local timeout = 5
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."МЕЧЕНЫЙ:".."\\n".."%c[255,255,128,128]Котобегемот, я пришёл в каморку торговца - тут нет никого.".."\n", timeout, nil, 15000)
	timeout = timeout+10
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."КОТОБЕГЕМОТ:".."\\n".."%c[255,255,128,128]Странно это все. Нужно выяснить, куда он делся. Осмотри очень внимательно его каморку, может, найдёшь какую-нибудь зацепку. Думаю, нужно проверить также все закутки и полки на складе. Для этого ты должен проникнуть на его склад. Все торговцы обычно запирают свои склады хорошо, но, думаю, ты сможешь туда проникнуть. Как сделаешь - стучись в личку.".."\n", timeout, nil, 30000)
	kostya_dialog.create_teleport("tele_marsh1",vector():set(-179.458984375,4.4350399971008,-325.39538574219),50913,3365)
end
function suslov_marsh_sms2()
	kostya_dialog.delete_teleport("tele_marsh1")
	local timeout = 15
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."МЕЧЕНЫЙ:".."\\n".."%c[255,255,128,128]Котобегемот, я нашёл Суслова. Он мёртв.".."\n", timeout, nil, 20000)
	timeout = timeout+10
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."КОТОБЕГЕМОТ:".."\\n".."%c[255,255,128,128]Как это случилось?".."\n", timeout, nil, 20000)
	timeout = timeout+10
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."МЕЧЕНЫЙ:".."\\n".."%c[255,255,128,128]Он лежит в подвале своей каморки. Причём уже довольно давно. В его ПДА записано, что он убирался на складе и попал в неизвестно откуда взявшийся телепорт, который закинул его сюда. Выбраться обратно он не смог... Свиблову сказал, что уехал и его не искали... Кричал - не слышали...".."\n", timeout, nil, 30000)
	timeout = timeout+15
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."КОТОБЕГЕМОТ:".."\\n".."%c[255,255,128,128]Ну, Свиблов! Ну, ...! Разве так можно к своим людям относиться! Неужели не удивило, что от него давно нет вестей?! Зайди к Свиблову и скажи ему все, что ты об этом думаешь.".."\n", timeout, nil, 30000)
	timeout = timeout+10
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."МЕЧЕНЫЙ:".."\\n".."%c[255,255,128,128]Да, но как мне выбраться из этого подвала? Я попал в тот же телепорт, что и Суслов.".."\n", timeout, nil, 30000)
	timeout = timeout+10
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ДОЦЕНТ:".."\\n".."%c[255,255,128,128]Меченый, мои приборы показывают, что в этом районе есть ещё один телепорт. Он появился совсем недавно. Попробуйте отыскать его. Думаю, он сможет вам помочь.".."\n", timeout, nil, 30000)
	kostya_dialog.create_teleport("tele_marsh2",vector():set(-178.91296386719,-0.18326634168625,-309.05569458008),51830,3365)
end
function n_inventory_box_almaz9()
	alife():create("n_inventory_box_almaz9",vector():set(-100.95771789551,13.623109817505,-14.196672439575),15840,2250)
end
function tele_almaz_act()
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ТЕНЬ МОНОЛИТА:".."\\n".."%c[255,255,128,128]Да! Вот это место! Выброси в него все черепа, и что предопределено - то свершится! Да здравствует Монолит! Уууу! Оооо! Аааа!".."\n", nil, nil, 30000)
	db.actor:give_info_portion("snp_almaz2")
	kostya_dialog.delete_teleport("tele_almaz_act")
end
function almaz_done()
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ТЕНЬ МОНОЛИТА:".."\\n".."%c[255,255,128,128]Да! Свершилось! Да будет вечен Монолит! Уууууу! Оооооо! Аааааа!".."\n", 3, nil, 20000)
	alife():create("af_idol_monolita",vector():set(174.08480834961,57.11833190918,386.01168823242),172632,2987)
	local obj = snp.object_by_section_nobinder("zone_monolith_snp")
	if obj then
		alife():release(alife():object(obj:id()))
	end
	xr_sound.get_safe_sound_object([[snp\heartbeat100]]):stop()
	xr_sound.get_safe_sound_object([[heart\5]]):play(db.actor, 0, sound_object.s3d+sound_object.looped)
	amk.start_timer("run",5,"snp_spawn.almaz_done2()")
end
function almaz_done2()
	db.actor:give_info_portion("snp_almaz3")
end

function n_inventory_box_x81()
	local p={
		{position={x=-93.226638793945,y=-20.163202285767,z=74.458755493164},gv=3838,lv=1330},
		{position={x=-84.377281188965,y=-24.324247360229,z=83.255226135254},gv=3839,lv=2513},
		{position={x=-78.103950500488,y=-15.964325904846,z=72.509765625},gv=3838,lv=3511}
	}
    local a
	for i=1,#p do
		a = p[i]
		for j=1,3 do
			alife():create("m_poltergeist_normal_tele",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
			alife():create("m_poltergeist_normal_tele",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
			alife():create("m_poltergeist_strong_flame",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
		end
	end
end

function tele_kl1()
	kostya_dialog.delete_teleport("tele_kl1")
	alife():create("snp_note10",vector():set(-230.41812133789,13.825492858887,-220.94027709961),31333,3276)
end

function n_inventory_box_kl3()
	db.actor:give_info_portion("snpt_kl1_found1")
end

function n_inventory_box_sd2()
	alife():create("snp_sd1",vector():set(-21.004127502441,13.328789710999,29.46997833252),8491,3327)
	alife():create("snp_sd2",vector():set(2.8624777793884,2.5275311470032,7.3126935958862),14412,3326)
	alife():create("snp_sd3",vector():set(-39.907375335693,6.924859046936,-45.844055175781),4675,3325)
	alife():create("snp_sd4",vector():set(-78.145362854004,9.2754678726196,-49.484188079834),562,3325)
	alife():create("snp_sd5",vector():set(-68.164642333984,8.2203969955444,-48.805156707764),1511,3325)
end

function n_inventory_box_cp1()
	alife():create("snp_cp1",vector():set(189.54820251465,28.663228988647,205.02629089355),259731,2219)
	alife():create("snp_cp2",vector():set(64.281150817871,7.3217544555664,201.39108276367),176277,2127)
	alife():create("snp_cp3",vector():set(101.4529800415,24.25239944458,154.71430969238),212445,2267)
	alife():create("snp_cp4",vector():set(147.33567810059,20.650037765503,272.30612182617),243602,2149)
	snp.create_restrictor(vector():set(111.87180328369,46.575588226318,206.44511413574),228843,2163,5,"snp_spawn.n_inventory_box_cp1_2")
end
function n_inventory_box_cp1_2()
	local timeout = 15
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."СТРЕЛОК:".."\\n".."%c[255,255,128,128]Фенрир, что-то я не пойму, где тайник? Я на самом верху колеса!".."\n", timeout, nil, 20000)
	timeout = timeout+10
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ФЕНРИР:".."\\n".."%c[255,255,128,128]Стрелок, братишка, с чего ты взял, что я наверх всё снаряжение тащить буду? По арматурам лазить с полным рюкзаком как-то не с руки. Я с собой только ствол прихватил, а снарягу оставил внизу. На земле смотри.".."\n", timeout, nil, 30000)
	alife():create("n_inventory_box_cp1",vector():set(92.622108459473,-0.56629079580307,210.32638549805),202289,2163)
end

function n_inventory_box_pp1()
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ПЕРЕХВАЧЕННОЕ СООБЩЕНИЕ:".."\\n".."%c[255,255,128,128]Я ...пот...ряю... все прибыли? Тогда начинаем.".."\n", nil, nil, 10000)
	amk.start_timer("run",5,"snp_spawn.n_inventory_box_pp1_chunk()")
end
function n_inventory_box_pp1_chunk()
	local p={
		{position={x=12.725239753723,y=0.37564644217491,z=3.8642578125},gv=3792,lv=21440},
		{position={x=24.296495437622,y=-0.0051212310791016,z=16.710052490234},gv=3806,lv=28067},
		{position={x=25.648307800293,y=1.5919233560562,z=-8.6800222396851},gv=3807,lv=28470},
		{position={x=15.736646652222,y=1.4347816705704,z=-16.292209625244},gv=3800,lv=23118},
		{position={x=-7.6278519630432,y=-0.00040891766548157,z=-31.462839126587},gv=3774,lv=8226},
		{position={x=-34.792510986328,y=3.1738247871399,z=-19.447460174561},gv=3774,lv=2923},
		{position={x=-37.553775787354,y=3.183525800705,z=23.021474838257},gv=3776,lv=2492},
		{position={x=-12.142234802246,y=-0.00035828351974487,z=43.158676147461},gv=3779,lv=7281},
		{position={x=-3.8987855911255,y=-0.0011749267578125,z=19.59147644043},gv=3784,lv=10370},
		{position={x=12.01701259613,y=0.14925375580788,z=38.21936416626},gv=3806,lv=20965},
		{position={x=-3.3724670410156,y=0.00021854043006897,z=2.6920034885406},gv=3792,lv=10857}
	}
    local a
	for i=1,#p do
		a = p[i]
		alife():create("tank_spawn_zasada",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
	end
	alife():create("snp_tank_pp1",vector():set(-41.806259155273,4.0759263038635,5.2353081703186),1862,3775)
end

function snp_dt_tp1(spawn)
	local p={
		{position={x=-219.630859375,y=14.868588433265686,z=44.444320678711},gv=1386,lv=21987},
		{position={x=-223.18002319336,y=14.868782997131,z=33.292755126953},gv=1390,lv=20773},
		{position={x=-236.5104675293,y=14.868897438049,z=40.995559692383},gv=1391,lv=15466},
		{position={x=-231.24954223633,y=14.869776725769,z=50.04740524292},gv=1391,lv=17798},
		{position={x=-232.67242431641,y=14.86935710907,z=58.059581756592},gv=1391,lv=16698},
		{position={x=-239.93685913086,y=14.869313240051,z=55.255573272705},gv=1391,lv=14227},
		{position={x=-244.97937011719,y=14.8624210357666,z=51.39533996582},gv=1391,lv=11564},
		{position={x=-243.02626037598,y=14.862419128418,z=54.828521728516},gv=1391,lv=12523},
		{position={x=-236.89419555664,y=14.866636276245,z=60.510143280029},gv=1391,lv=14925},
		{position={x=-243.32078552246,y=14.8624172210693,z=54.284843444824},gv=1391,lv=12194},
		{position={x=-220.02133178711,y=14.868302345276,z=38.656970977783},gv=1390,lv=21751}
	}
    local a
	for i=1,#p do
		if spawn then
			a = p[i]
			kostya_dialog.create_teleport("snp_dt_bt"..tostring(i),vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
		else
			kostya_dialog.delete_teleport("snp_dt_bt"..tostring(i))
		end
	end
	if spawn then
		kostya_dialog.delete_teleport("snp_dt_tp1")
		snp.create_restrictor(vector():set(-227.63282775879,13.89160823822,35.841938018799),19449,1390,1,"snp_spawn.snp_dt_kontrik1")
		snp.create_restrictor(vector():set(-233.39303588867,13.680372238159,51.469799041748),16961,1391,3,"snp_spawn.snp_dt_kontrik1")
		snp.create_restrictor(vector():set(-241.18742370605,14.869735717773,62.989063262939),13236,1391,1,"snp_spawn.snp_dt_btok")
		news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ИСТОЧНИК НЕИЗВЕСТЕН:".."\\n".."%c[255,255,128,128]Телепорт на свае стройки.".."\n", nil, nil, 30000)
	else
		kostya_dialog.delete_teleport("snp_dt_tp2")
		db.actor:give_info_portion("snp_tmp_reset")
		db.actor:disable_info_portion("snp_tmp_reset")
		news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ИСТОЧНИК НЕИЗВЕСТЕН:".."\\n".."%c[255,255,128,128]Телепорт на столбе.".."\n", nil, nil, 30000)
		kostya_dialog.create_teleport("snp_dt_tp3",vector():set(-329.50329589844,12.779556274414,168.64186096191),191,1360)
	end
end
function snp_dt_kontrik1()
	local p={
		{position={x=-240.68920898438,y=9.3623247146606,z=59.203742980957},gv=1391,lv=13571},
		{position={x=-241.73342895508,y=4.5596385002136,z=53.443264007568},gv=1389,lv=13207},
		{position={x=-239.16525268555,y=4.5602912902832,z=58.571365356445},gv=1389,lv=14239}
	}
    local a
	for i=1,#p do
		a = p[i]
		alife():create("m_controller_normal_fat",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
	end
end
function snp_dt_btok()
	db.actor:give_info_portion("snp_tmp1")
end
function snp_dt_bt9()
	if has_alife_info("snp_tmp1") and not has_alife_info("snp_tmp2") then
		db.actor:give_info_portion("teleport_started")
		db.actor:set_actor_position(vector():set(-238.62300109863,9.3622283935547,42.196327209473))
		db.actor:set_actor_direction(0.5236)
		db.actor:give_info_portion("teleport_finished")
		kostya_dialog.create_teleport("snp_dt_tp2",vector():set(-233.1616973877,9.3629388809204,51.349250793457),16959,1391)
		news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ИСТОЧНИК НЕИЗВЕСТЕН:".."\\n".."%c[255,255,128,128]Иди в дверь.".."\n", nil, nil, 10000)
		db.actor:give_info_portion("snp_tmp2")
	end
end

function snp_dt_tp3()
	kostya_dialog.delete_teleport("snp_dt_tp3")
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ИСТОЧНИК НЕИЗВЕСТЕН:".."\\n".."%c[255,255,128,128]Телепорт на дереве.".."\n", nil, nil, 10000)
	kostya_dialog.create_teleport("snp_dt_tp4",vector():set(-305.60232543945,10.665794372559,-150.46376037598),5859,1378)
end
function snp_dt_tp4()
	kostya_dialog.delete_teleport("snp_dt_tp4")
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ИСТОЧНИК НЕИЗВЕСТЕН:".."\\n".."%c[255,255,128,128]Телепорт на трубе.".."\n", nil, nil, 10000)
	kostya_dialog.create_teleport("snp_dt_tp5",vector():set(-13.389389038086,6.3243999481201,155.568359375),49503,1420)
end
function snp_dt_tp5()
	kostya_dialog.delete_teleport("snp_dt_tp5")
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ИСТОЧНИК НЕИЗВЕСТЕН:".."\\n".."%c[255,255,128,128]Белая крыша, зелёный вагон.".."\n", nil, nil, 10000)
	kostya_dialog.create_teleport("snp_dt_tp6",vector():set(-70.691795349121,4.5198760032654,157.525390625),49505,1420)
end
function snp_dt_tp6()
	kostya_dialog.delete_teleport("snp_dt_tp6")
	alife():create("n_inventory_box_dt2",vector():set(-243.51217651367,23.870098114014,39.412258148193),12835,1391)
	snp.play_snd_rnd_ratchant()
end

function snp_cp_tp1()
	kostya_dialog.delete_teleport("snp_cp_tp1")
	alife():create("n_inventory_box_cp4_3",vector():set(-66.955474853516,3.9703903198242,148.00028991699),32386,2212)
end

function snp_mg_tp1()
	kostya_dialog.delete_teleport("snp_mg_tp1")
	alife():release(snp.object_by_section_offline("brodaga_mg"))
	alife():create("n_inventory_box_mg2",vector():set(-41.756492614746,13.355162620544,-37.114521026611),298401,3620)
end

function snpt_bar1_restr1()
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."БРОДЯГА:".."\\n".."%c[255,255,128,128]Прыгай на ёмкость.".."\n", nil, nil, 10000)
	kostya_dialog.create_teleport("snp_bar_tp1",vector():set(139.81307983398,12.010727882385,141.2961730957),37807,1204)
end
function snp_bar_tp1()
	kostya_dialog.delete_teleport("snp_bar_tp1")
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."БРОДЯГА:".."\\n".."%c[255,255,128,128]Запрыгни на четвёртую трубу.".."\n", nil, nil, 10000)
	kostya_dialog.create_teleport("snp_bar_tp2",vector():set(175.41485595703,19.199771881104,155.69961547852),39883,1204)
end
function snp_bar_tp2()
	kostya_dialog.delete_teleport("snp_bar_tp2")
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."БРОДЯГА:".."\\n".."%c[255,255,128,128]Стрелок, будь настойчив.".."\n", nil, nil, 10000)
	kostya_dialog.create_teleport("snp_bar_tp3",vector():set(166.15460205078,19.47368812561,171.05030822754),52765,1259)
end
function snp_bar_tp3()
	kostya_dialog.delete_teleport("snp_bar_tp3")
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."БРОДЯГА:".."\\n".."%c[255,255,128,128]Поищи на балконе у четвёртой трубы.".."\n", nil, nil, 10000)
	kostya_dialog.create_teleport("snp_bar_tp4",vector():set(171.9462890625,7.5396528244019,155.70764160156),52765,1259)
end
function snp_bar_tp4()
	kostya_dialog.delete_teleport("snp_bar_tp4")
	kostya_dialog.create_teleport("snp_bar_tp5",vector():set(152.81427001953,19.476650238037,171.01899719238),52765,1259)
end
function snp_bar_tp5()
	kostya_dialog.delete_teleport("snp_bar_tp5")
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."БРОДЯГА:".."\\n".."%c[255,255,128,128]Смотри на зелёной крыше.".."\n", nil, nil, 10000)
	kostya_dialog.create_teleport("snp_bar_tp6",vector():set(-49.611335754395,4.5200862884521,157.5684967041),19721,1242)
end
function snp_bar_tp6()
	kostya_dialog.delete_teleport("snp_bar_tp6")
	kostya_dialog.create_teleport("snp_bar_tp7",vector():set(139.4856262207,19.477128982544,171.00762939453),31464,1220)
end
function snp_bar_tp7()
	kostya_dialog.delete_teleport("snp_bar_tp7")
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."БРОДЯГА:".."\\n".."%c[255,255,128,128]Иди к южному блокпосту.".."\n", nil, nil, 10000)
	kostya_dialog.create_teleport("snp_bar_tp8",vector():set(205.39068603516,10.585292816162,-1.3336123228073),18066,1306)
end
function snp_bar_tp8()
	kostya_dialog.delete_teleport("snp_bar_tp8")
	kostya_dialog.create_teleport("snp_bar_tp9",vector():set(120.52246856689,19.477516174316,165.36726379395),41005,1204)
	alife():create("n_inventory_box_bar1",vector():set(73.957122802734,15.60955619812,241.17614746094),41005,1204)
end
function snp_bar_tp9()
	kostya_dialog.delete_teleport("snp_bar_tp9")
	snp.play_snd_rnd_ratchant()
end

function spawn_don_kihot_and_note1()
	spawn_don_kihot_and_note(1)
end
function spawn_don_kihot_and_note2()
	spawn_don_kihot_and_note(2)
end
function spawn_don_kihot_and_note(num)
	local obj = snp.object_by_section("n_inventory_box_garbage"..num)
	local item
	if not has_alife_info("snpt_garbage1_have1") then
		item = "snp_note16"
	else
		item = "exo_knight_outfit"
	end
	amk.spawn_item_in_inv(item,obj)
end

function n_inventory_box_garbage1_common()
	db.actor:give_info_portion("no_teleport_near_heli_btr")
	snp.create_restrictor_out(db.actor:position(),db.actor:level_vertex_id(),db.actor:game_vertex_id(),100,"snp.btr_garbage1_fail")
end
function n_inventory_box_garbage1()
	n_inventory_box_garbage1_common()

	alife():create("snp_garbage1_1",vector():set(-36.485321044922,3.8032703399658,-246.55656433105),149246,266)
	alife():create("snp_garbage1_2",vector():set(-3.7791259288788,2.8881192207336,-146.07145690918),172331,286)
	alife():create("snp_garbage1_3",vector():set(25.489311218262,1.647035241127,-200.05819702148),197955,410)
	alife():create("snp_garbage1_4",vector():set(-140.85066223145,-0.34735253453255,-200.54650878906),75941,269)
	amk_mod.spawn_military_tech_pack(alife():create("vehicle_btr",vector():set(-136.22091674805,-1.4127777814865,-187.53369140625),79956,269),"vehicle_btr", "scripts\\snp\\btr_garbage1.ltx")
	amk_mod.spawn_military_tech_pack(alife():create("vehicle_btr",vector():set(-123.06675720215,-2.6012284755707,-223.18627929688),92522,269),"vehicle_btr", "scripts\\snp\\btr_garbage2.ltx")
	amk_mod.spawn_military_tech_pack(alife():create("vehicle_btr",vector():set(24.212112426758,0.44745007157326,-255.32897949219),197139,262),"vehicle_btr", "scripts\\snp\\btr_garbage3.ltx")
	amk_mod.spawn_military_tech_pack(alife():create("vehicle_btr",vector():set(39.5124168396,0.47109958529472,-166.15400695801),212940,288),"vehicle_btr", "scripts\\snp\\btr_garbage4.ltx")
end
function n_inventory_box_garbage2()
	n_inventory_box_garbage1_common()

	alife():create("snp_garbage2_1",vector():set(-194.72901916504,7.7801966667175,15.87949848175),33060,314)
	alife():create("snp_garbage2_2",vector():set(-165.37139892578,4.5919132232666,-68.338905334473),55083,303)
	alife():create("snp_garbage2_3",vector():set(-202.11247253418,4.7163577079773,-68.509216308594),28318,303)
	alife():create("snp_garbage2_4",vector():set(-198.28709411621,0.55662047863007,40.41609954834),30891,316)
	amk_mod.spawn_military_tech_pack(alife():create("vehicle_btr",vector():set(-220.8010559082,0.57280075550079,-15.319334983826),18648,307),"vehicle_btr", "scripts\\snp\\btr_garbage1.ltx")
	amk_mod.spawn_military_tech_pack(alife():create("vehicle_btr",vector():set(-145.56317138672,0.20180717110634,82.764350891113),71867,337),"vehicle_btr", "scripts\\snp\\btr_garbage2.ltx")
	amk_mod.spawn_military_tech_pack(alife():create("vehicle_btr",vector():set(-219.17126464844,0.18032047152519,-32.415725708008),19263,307),"vehicle_btr", "scripts\\snp\\btr_garbage3.ltx")
	amk_mod.spawn_military_tech_pack(alife():create("vehicle_btr",vector():set(-126.16971588135,2.0213801860809,-86.727584838867),90035,300),"vehicle_btr", "scripts\\snp\\btr_garbage4.ltx")
end

function n_inventory_box_x161()
end

function n_inventory_box_agro1()
	if has_alife_info("snp_resident_evil10_done") and has_alife_info("shodka_agro_end") and not has_alife_info("shodka_agro_done") then
		db.actor:give_info_portion("shodka_agro_done")
		alife():create("agro_ruk",vector():set(14.760587692261,26.009275436401,18.774129867554),406013,692)
		alife():create("n_inventory_box_agro1",vector():set(290.7509765625,0.39019677042961,14.648055076599),434696,693)
	end
end

function n_inventory_box_jupiter1()
	local p={
		{position={x=203.86871337891,y=-29.079652786255,z=111.07663726807},gv=3740,lv=1064413},
		{position={x=218.42370605469,y=-29.722547531128,z=81.001609802246},gv=3740,lv=1089997},
		{position={x=241.14288330078,y=-28.997896194458,z=99.475288391113},gv=3740,lv=1126330},
		{position={x=240.62884521484,y=-29.401880264282,z=128.24250793457},gv=3740,lv=1126360},
		{position={x=234.68539428711,y=-28.067792892456,z=164.75881958008},gv=3738,lv=1116948},
		{position={x=212.63925170898,y=-29.303434371948,z=151.38456726074},gv=3732,lv=1080251}
	}
    local a
	for i=1,#p do
		a = p[i]
		for j=1,5 do
			alife():create("gigant_jumper_normal",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
		end
	end
end
function n_inventory_box_jupiter2()
	db.actor:give_info_portion("snp_tmp1")
end
function snpt_jupiter4_restr1()
	local p={
		{position={x=139.42726135254,y=1.6947005987167,z=203.79672241211},gv=3732,lv=954298},
		{position={x=139.50270080566,y=1.3853598833084,z=224.89259338379},gv=3732,lv=954327},
		{position={x=121.81856536865,y=2.7461514472961,z=219.36386108398},gv=3732,lv=923910},
		{position={x=133.90162658691,y=1.7914649248123,z=210.55996704102},gv=3732,lv=944568},
		{position={x=161.08445739746,y=1.2642320394516,z=217.54733276367},gv=3732,lv=991008},
		{position={x=145.34747314453,y=1.2944405078888,z=225.67417907715},gv=3732,lv=965028},
		{position={x=144.68710327148,y=1.3452863693237,z=223.55224609375},gv=3732,lv=963847},
		{position={x=147.41577148438,y=1.3476969003677,z=214.0147857666},gv=3732,lv=965016},
		{position={x=138.36897277832,y=1.3410655260086,z=188.21481323242},gv=3732,lv=953081}
	}
    local a
	for i=1,#p do
		a = p[i]
		alife():create("snp_tank1",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
		alife():create("snp_tank2",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
		alife():create("snp_tank3",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
	end
end
function snpt_jupiter4_restr2()
	local timeout = 2
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."СТРЕЛОК:".."\\n".."%c[255,255,128,128]Бродяга, я на базе. Монолит порешил, а вот Бороду что-то не могу найти. Где здесь яма? Отправь ему сообщение, пусть пошумит, что ли.".."\n", timeout, nil, 20000)
	timeout = timeout+10
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."БРОДЯГА:".."\\n".."%c[255,255,128,128]Он не отвечает. Я уже не раз пробовал с ним связаться как ты ушёл.".."\n", timeout, nil, 20000)
end
function snpt_jupiter4_restr3()
	alife():create("boroda_jupiter",vector():set(172.392578125,-8.8557348251343,209.92704772949),996811,3732)
end

function snpt_jupiter5_mono1()
	local p={
		{position={x=398.93084716797,y=46.599296569824,z=-186.0565032959},gv=3743,lv=1344339},
		{position={x=399.64959716797,y=39.341522216797,z=-191.72418212891},gv=3743,lv=1345533},
		{position={x=399.76971435547,y=37.426422119141,z=-181.96182250977},gv=3743,lv=1345549}
	}
    local a
	for i=1,#p do
		a = p[i]
		alife():create("snp_tank1",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
		alife():create("snp_tank2",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
		alife():create("snp_tank3",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
	end
end
function snpt_jupiter5_heli_z1()
	-- не больше 15 вертов
	if snp.count_heli() >= 15 then
		local text = {
			"Да сколько же их тут! Ммать!",
			"Неет, меня так просто не возьмешь! Ну, держись, Монолит!",
			"Сколько бы вас ни было - все здесь ляжете!",
			"Не выйдет у тебя ничего, Монолит! Я всю Зону прошел, и с тобой справлюсь! Получай!"
		}
		news_manager.send_tip(db.actor, "%c[255,160,160,160]".."СТРЕЛОК:".."\\n".."%c[255,255,128,128]"..text[math.random(#text)].."\n", nil, nil, 20000)
		return
	end

	local p={
		{position={x=398.02651977539,y=100.077785491943,z=-295.92761230469},gv=3747,lv=1363007},
		{position={x=507.31683349609,y=100.78346824646,z=-201.4485168457},gv=3741,lv=1430578},
		{position={x=296.166015625,y=100.584650039673,z=-204.8798828125},gv=3739,lv=1197439}
	}
    local a
	for i=1,#p do
		a = p[i]
		amk_mod.spawn_military_tech_pack(alife():create("snp_helicopter",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv), "helicopter", "scripts\\snp\\heli_j5"..tostring(i)..".ltx")
	end
end
function snpt_jupiter5_run0()
	db.actor:give_info_portion("no_teleport_near_heli_btr")
	alife():release(snp.object_by_section_offline("boroda_jupiter"))
	local obj = alife():create("boroda_zaton",vector():set(135.22779846191,-7.3403596878052,187.80056762695),1198135,3686)
	snp.set_stalker_story_id(obj,19915)
	snpt_jupiter5_mono1()
	snpt_jupiter5_heli_z1()
	snp.create_restrictor(vector():set(398.8825378418,46.58655166626,-186.03123474121),1344339,3743,1,"snp_spawn.snpt_jupiter5_restr1")
	amk.start_timer("run",45,"snp_spawn.snpt_jupiter5_run1()")
end
function snpt_jupiter5_run1()
	if has_alife_info("snpt_jupiter5_fail") then return end
	
	snpt_jupiter5_mono1()
	snpt_jupiter5_heli_z1()
	amk.start_timer("run",45,"snp_spawn.snpt_jupiter5_run2()")
end
function snpt_jupiter5_run2()
	if has_alife_info("snpt_jupiter5_fail") then return end
	
	snpt_jupiter5_mono1()
	snpt_jupiter5_heli_z1()
	amk.start_timer("run",90,"snp_spawn.snpt_jupiter5_run3()")
end
function snpt_jupiter5_run3()
	if has_alife_info("snpt_jupiter5_fail") then return end
	
	snpt_jupiter5_heli_z1()
	if not has_alife_info("snpt_jupiter5_have1") then
		amk.start_timer("run",90,"snp_spawn.snpt_jupiter5_run3()")
	end
end
function snpt_jupiter5_restr1()
	if has_alife_info("snpt_jupiter5_fail") then return end

	local timeout = 5
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."СТРЕЛОК:".."\\n".."%c[255,255,128,128]Борода, я перед решёткой на лестнице. Тут такое творится! Где твой рюкзак?".."\n", timeout, nil, 20000)
	timeout = timeout+10
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."БОРОДА:".."\\n".."%c[255,255,128,128]Лезь выше. Я его скинул, когда ещё за решёткой был.".."\n", timeout, nil, 20000)
	timeout = timeout+10
	news_manager.send_tip(db.actor, "%c[255,160,160,160]"..user_name().." (мысли вслух):".."\\n".."%c[255,255,128,128]Да, ему легко говорить. Тут Монолит мне прохода не даёт, а он говорит - лезь выше! Какого он вообще сюда полез?".."\n", timeout, nil, 20000)
	snp.create_restrictor(vector():set(399.89099121094,56.355697631836,-182.05282592773),1344334,3743,1,"snp_spawn.snpt_jupiter5_restr2")
end
function snpt_jupiter5_restr2()
	if has_alife_info("snpt_jupiter5_fail") then return end

	local timeout = 5
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."СТРЕЛОК:".."\\n".."%c[255,255,128,128]Я на самом последнем этаже - рюкзака нет. Отвечай быстрее, где он, а то меня Монолит тут порешит! Он меня вертолётами обложил со всех сторон!".."\n", timeout, nil, 20000)
	timeout = timeout+10
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."БОРОДА:".."\\n".."%c[255,255,128,128]Странно. Должен быть там. Не могу с ходу вспомнить точно. Монолит, когда пытал, по голове бил, болит сильно. Стрелок, ты пока с вертолётами разбирайся, а я подумаю, где ещё я его мог оставить.".."\n", timeout, nil, 20000)
	timeout = timeout+10
	news_manager.send_tip(db.actor, "%c[255,160,160,160]"..user_name().." (мысли вслух):".."\\n".."%c[255,255,128,128]Угу. Лучше бы мы поменялись. Борода разбирался бы с вертолётами, а я сидел бы и думал, куда же он свой рюкзак умудрился затолкать...".."\n", timeout, nil, 20000)
	timeout = timeout+10
	amk.start_timer("run2",timeout,"snp_spawn.snpt_jupiter5_have2()")
end
function snpt_jupiter5_have2()
	if has_alife_info("snpt_jupiter5_fail") then return end

	db.actor:give_info_portion("snpt_jupiter5_have1") 
	local p={
		{position={x=363.57598876953,y=27.446691513062,z=-199.10688781738},gv=3741,lv=1292568},
		{position={x=448.03466796875,y=27.67280960083,z=-164.00025939941},gv=3741,lv=1427096},
		{position={x=373.82931518555,y=27.448501586914,z=-195.63957214355},gv=3741,lv=1308599},
		{position={x=329.47528076172,y=27.650470733643,z=-168.52958679199},gv=3741,lv=1243576},
		{position={x=353.50900268555,y=28.190092086792,z=-159.15997314453},gv=3741,lv=1278942},
		{position={x=374.54891967773,y=27.489912033081,z=-174.95315551758},gv=3741,lv=1309630},
		{position={x=356.46075439453,y=28.496633529663,z=-152.48675537109},gv=3741,lv=1282778},
		{position={x=453.34948730469,y=26.964168548584,z=-121.35138702393},gv=3741,lv=1436029},
		{position={x=435.44659423828,y=27.529432296753,z=-148.63513183594},gv=3741,lv=1405378},
		{position={x=421.47744750977,y=27.673887252808,z=-161.87846374512},gv=3741,lv=1381590},
		{position={x=434.01824951172,y=27.674629211426,z=-179.73728942871},gv=3741,lv=1402829},
		{position={x=382.095703125,y=27.631851196289,z=-188.90495300293},gv=3741,lv=1320360},
		{position={x=334.22894287109,y=28.79377746582,z=-147.85690307617},gv=3741,lv=1249755},
		{position={x=412.97665405273,y=27.673191070557,z=-175.97169494629},gv=3741,lv=1367973}
	}
    local a
	for i=1,#p do
		a = p[i]
		amk_mod.spawn_military_tech_pack(alife():create("vehicle_btr",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv),"vehicle_btr", "scripts\\snp\\btr.ltx")
	end
end
function create_snpt_jupiter5_restr3()
	if has_alife_info("snpt_jupiter5_fail") then return end

	local timeout = 5
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."СТРЕЛОК:".."\\n".."%c[255,255,128,128]Борода, я разобрался с вертолётами. И БТРов монолитовских пострелял немного. Говори, где твой рюкзак.".."\n", timeout, nil, 20000)
	timeout = timeout+10
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."БОРОДА:".."\\n".."%c[255,255,128,128]Кажется, я вспомнил. Я его на крышу закинул, чтобы Монолит не подобрал. Мне тогда некогда выбирать было. И голова до сих пор не прошла... Думаю, раз на лестнице нет, значит - он на крыше.".."\n", timeout, nil, 20000)
	timeout = timeout+12
	news_manager.send_tip(db.actor, "%c[255,160,160,160]"..user_name().." (мысли вслух):".."\\n".."%c[255,255,128,128]Как это? Разве здесь можно залезть на крышу?!".."\n", timeout, nil, 20000)
	timeout = timeout+10
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."КОМАНДА СОЗДАТЕЛЕЙ ОП-2:".."\\n".."%c[255,255,128,128]Да. И не так уж сложно по сравнению с тем, что ты уже пережил. Штурмуй преграду, "..user_name().."!".."\n", timeout, nil, 20000)
	timeout = timeout+10
	amk.start_timer("run2",timeout,"snp_spawn.snpt_jupiter5_have3()")
	snp.create_restrictor(vector():set(397.37255859375,62.746688842773,-179.78741455078),1339977,3741,0.5,"snp_spawn.snpt_jupiter5_restr3")
end
function snpt_jupiter5_have3()
	if has_alife_info("snpt_jupiter5_fail") then return end
	
	db.actor:give_info_portion("snpt_jupiter5_have3") 
end
function snpt_jupiter5_restr3()
	if has_alife_info("snpt_jupiter5_fail") then return end

	snp.play_snd_rnd_ratchant()
	amk.start_timer("run",4,"snp_spawn.snpt_jupiter5_restr3_chunk()")
end
function snpt_jupiter5_restr3_chunk()
	db.actor:give_info_portion("snpt_jupiter6_done")
	alife():create("n_inventory_box_jupiter6",vector():set(406.46636962891,59.028244018555,-221.15948486328),1344334,3743)
end

function snpt_jupiter6_run1()
	if has_alife_info("snpt_jupiter5_fail") then return end
	
	local p={
		{position={x=359.26257324219,y=20.6462619304657,z=26.581485748291},gv=3744,lv=1286919},
		{position={x=563.94891357422,y=20.754264831543,z=-342.29296875},gv=3747,lv=1450707},
		{position={x=96.669021606445,y=20.922441482544,z=-156.76354980469},gv=3731,lv=879630},
		{position={x=38.010517120361,y=20.224592208862,z=-458.7751159668},gv=3726,lv=777829},
		{position={x=307.62365722656,y=20.72057723999,z=-586.80981445313},gv=3726,lv=777796}
	}
    local a
	for i=1,#p do
		a = p[i]
		amk_mod.spawn_military_tech_pack(alife():create("helicopter",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv), "helicopter", "scripts\\snp\\heli_j6"..tostring(i)..".ltx")
	end
	snp.create_zone(vector():set(406.49456787109,58.99781036377,-220.04891967773),1344334,3743,1,"in_invisible_zone","snpt_jupiter6_have2")
	amk.start_timer("run",30,"snp_spawn.snpt_jupiter6_run2()")
end
function snpt_jupiter6_run2()
	if has_alife_info("snpt_jupiter5_fail") then return end
	amk_mod.spawn_military_tech_pack(alife():create("helicopter",vector():set(408.64453125,110.6486406326294,154.24880981445),1361187,3746), "helicopter", "scripts\\snp\\heli_j66.ltx")
end
function snpt_jupiter6_run3()
	if has_alife_info("snpt_jupiter5_fail") then return end
	amk.start_timer("run",8,"snp_spawn.snpt_jupiter6_run4()")
end
function snpt_jupiter6_run4()
	if has_alife_info("snpt_jupiter5_fail") then return end
	amk_mod.spawn_military_tech_pack(alife():create("vehicle_btr",vector():set(406.36242675781,59.029556274414,-192.23565063477),1344334,3743),"vehicle_btr", "scripts\\snp\\btr_idle.ltx")
	amk.start_timer("run",6,"snp_spawn.snpt_jupiter6_run5()")
end
function snpt_jupiter6_run5()
	if has_alife_info("snpt_jupiter5_fail") then return end
	alife():create("tm_jupiter1",vector():set(406.35971069336,59.029407501221,-197.06917724609),1347988,3743)
	amk.start_timer("run",6,"snp_spawn.snpt_jupiter6_run6()")
end
function snpt_jupiter6_run6()
	if has_alife_info("snpt_jupiter5_fail") then return end
	db.actor:give_info_portion("snpt_jupiter6_have2")
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ТЕНЬ МОНОЛИТА:".."\\n".."%c[255,255,128,128]Стрелок, не стреляй, я прилетел поговорить. Я боюсь к тебе подходить, чтобы ты не убил меня, поэтому я буду стоять здесь. Я пришёл без оружия. Мои вертолёты больше не атакуют тебя. Стрелок, подойди ко мне, я хочу сказать тебе кое-что важное.".."\n", nil, nil, 30000)
end
function snpt_jupiter6_run7()
	if has_alife_info("snpt_jupiter5_fail") then return end
	local obj = snp.create_restrictor(vector():set(173,27.353050231934,-192),1010186,3735,4,"snp_parad.parad_start")
	amk.add_spot_on_map(obj.id,"crlc_mdl","Место встречи с Тенью Монолита") 
	amk.save_variable("snp_spot_id",obj.id)
	amk.start_timer("run",2,"snp_spawn.snpt_jupiter6_run8()")
end
function snpt_jupiter6_run8()
	db.actor:stop_talk()
	alife():release(alife():object(snp.object_by_section("tm_jupiter1"):id()))
	amk.start_timer("run",6,"snp_spawn.snpt_jupiter6_run9()")
end
function snpt_jupiter6_run9()
	snp.release_all_online("vehicle_btr")
	amk.start_timer("run",4,"snp_spawn.snpt_jupiter6_run10()")
end
function snpt_jupiter6_run10()
	db.actor:give_info_portion("snp_parad_start")
	db.actor:disable_info_portion("no_teleport_near_heli_btr")
end

function n_inventory_box_jupiter8_2()
	local p={
		{position={x=399.63983154297,y=4.278076171875,z=-129.50193786621},gv=3744,lv=1345632},
		{position={x=399.43072509766,y=4.279013633728,z=-94.329231262207},gv=3744,lv=1345726},
		{position={x=415.32995605469,y=9.8524236679077,z=-118.81079864502},gv=3744,lv=1371648},
		{position={x=422.28140258789,y=9.9523086547852,z=-80.394989013672},gv=3744,lv=1382815}
	}
    local a
	for i=1,#p do
		a = p[i]
		for j=1,1 do
			alife():create("burer_strong",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
			alife():create("m_poltergeist_dd",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
			alife():create("m_controller_act",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
		end
	end
end

function n_inventory_box_jupiter11_1()
	local p={
		{position={x=-106.40468597412,y=14.640283584595,z=-317.01440429688},gv=3710,lv=542464},
		{position={x=-142.45532226563,y=17.086292266846,z=-316.16320800781},gv=3710,lv=477884},
		{position={x=-171.40196228027,y=10.782584190369,z=-300.67691040039},gv=3710,lv=426375},
		{position={x=-171.3385925293,y=6.0845952033997,z=-290.10400390625},gv=3710,lv=426405},
		{position={x=-162.44869995117,y=-0.054210186004639,z=-271.26181030273},gv=3710,lv=443083},
		{position={x=-180.10083007813,y=-1.9417978525162,z=-255.48797607422},gv=3710,lv=411694}
	}
    local a
	for i=1,#p do
		a = p[i]
		alife():create("burer_strong",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
	end
	
	local se_obj = alife():create("space_restrictor",vector():set(-59.711139678955,17.07265663147,-316.92935180664),619930,3710)
	local custom = 
		"[logic]\n"..
		"active = sr_idle1\n"..

		"[sr_idle1]\n"..
		"on_actor_inside = sr_idle2 %=snp_spawn.n_inventory_box_jupiter11_2%\n"..

		"[sr_idle2]\n"..
		"on_actor_inside = sr_idle3 %=snp_spawn.n_inventory_box_jupiter11_2%\n"..

		"[sr_idle3]\n"..
		"on_actor_inside = sr_idle4 %=snp_spawn.n_inventory_box_jupiter11_2 =snp_spawn.n_inventory_box_jupiter11_3%\n"..

		"[sr_idle4]\n"..
		"on_actor_inside = sr_idle4 %=snp_spawn.n_inventory_box_jupiter11_2%\n"..
		"on_info = {+n_inventory_box_jupiter11_have} nil\n"
	spawn_restrictor.rewrite_restrictor(se_obj, custom, 7)
end
function n_inventory_box_jupiter11_2()
	db.actor:give_info_portion("teleport_started")
	local pos=db.actor:position()
	db.actor:set_actor_position(vector():set(pos.x-75.59,pos.y,pos.z+2))
	db.actor:give_info_portion("teleport_finished")
end
function n_inventory_box_jupiter11_3()
	local p={
		{position={x=-104.5541229248,y=15.835403442383,z=-309.01086425781},gv=3710,lv=546208},
		{position={x=-104.52191162109,y=14.960140228271,z=-313.04565429688},gv=3710,lv=546197},
		{position={x=-104.52172088623,y=14.509706497192,z=-316.99136352539},gv=3710,lv=546185},
		{position={x=-104.5446395874,y=14.430490493774,z=-321.11737060547},gv=3710,lv=546173},
		{position={x=-104.49494934082,y=15.835020065308,z=-325.10073852539},gv=3710,lv=546166}
	}
    local a = p[math.random(#p)]
	snp.create_restrictor(vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv,2,"snp_spawn.n_inventory_box_jupiter11_4")
end
function n_inventory_box_jupiter11_4()
	local dogs = {"dog_skeleton", "dog_sil_hill", "dog_green", "dog_habaruch", "dog_strong", "dog_zombie"}
	local p={
		{position={x=-119.21965026855,y=14.64173412323,z=-321.1350402832},gv=3710,lv=519843},
		{position={x=-87.076210021973,y=15.766164779663,z=-313.54571533203},gv=3710,lv=575666}
	}

    local a
	for j=1,10 do
		for i=1,#p do
			a = p[i]
			alife():create(dogs[math.random(#dogs)],vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
		end
	end

	alife():create("n_inventory_box_jupiter11",vector():set(-10.279227256775,20.016332626343,-307.91693115234),683487,3710)
	db.actor:give_info_portion("n_inventory_box_jupiter11_have")
end

function n_inventory_box_zaton3()
	kostya_dialog.delete_teleport("snp_zaton_tp1")
	alife():create("n_inventory_box_zaton4",vector():set(-534.03106689453,42.853207092285,-254.44895019531),17266,3662)
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."КОМАНДА СОЗДАТЕЛЕЙ ОП-2:".."\\n".."%c[255,255,128,128]На Затоне можно выйти за границу территории и не используя гравипушку...".."\n", 3, nil, 20000)
end

function n_inventory_box_warlab1()
	xr_sound.get_safe_sound_object([[monsters\bloodsucker\bloodsucker_script_attack_0]]):play_no_feedback(db.actor, sound_object.s3d, 0, db.actor:position(), 1.0)
	snp.create_restrictor(vector():set(-36.41467666626,-8.9788122177124,-65.89990234375),102,3153,1,"snp_spawn.n_inventory_box_warlab1_2")
end
function n_inventory_box_warlab1_2()
	xr_sound.get_safe_sound_object([[monsters\bloodsucker_new\sucker_breath_0]]):play_no_feedback(db.actor, sound_object.s3d, 0, db.actor:position(), 1.0)
	snp.create_restrictor(vector():set(-3.4718022346497,-11.719957351685,-61.957084655762),3703,3169,2,"snp_spawn.n_inventory_box_warlab1_3")
end
function n_inventory_box_warlab1_3()
	xr_sound.get_safe_sound_object([[monsters\bloodsucker\sucker_breath_mix_0]]):play_no_feedback(db.actor, sound_object.s3d, 0, db.actor:position(), 1.0)
	kostya_dialog.create_teleport("snp_warlab_tp1",vector():set(-36.414615631104,-8.9564485549927,-52.446083068848),122,3154)
end
function n_inventory_box_warlab1_4()
	kostya_dialog.delete_teleport("snp_warlab_tp1")
	alife():create("n_inventory_box_warlab1",vector():set(-36.38415145874,-6.9750657081604,-53.516971588135),166,3154)
end

function n_inventory_box_x181_1()
	spawn_n_inventory_box_x181_1()
	amk.start_timer("run",60,"snp_spawn.n_inventory_box_x181_2()")
end
function n_inventory_box_x181_2()
	snp.create_restrictor(vector():set(9.7957534790039,-7.004012298634,-3.883784532547),4183,1135,2,"snp_spawn.spawn_n_inventory_box_x181_1")
end
function spawn_n_inventory_box_x181_1()
	alife():create("burer_strong",vector():set(-5.9277415275574,-10.815098762512,-4.373411655426),2045,1150)
	alife():create("burer_strong",vector():set(27.998977661133,-10.816669464111,-15.006872177124),6745,1138)
	alife():create("m_poltergeist_normal_tele",vector():set(27.998977661133,-10.816669464111,-15.006872177124),6745,1138)
	alife():create("m_poltergeist_normal_tele",vector():set(-5.9277415275574,-10.815098762512,-4.373411655426),2045,1150)
end

function snp_receipt_parts2_1()
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ИСТОЧНИК НЕИЗВЕСТЕН:".."\\n".."%c[255,255,128,128]Ищи телепорт.".."\n", nil, nil, 10000)
	kostya_dialog.create_teleport("snp_receipt_parts2_tp1",vector():set(94.704368591309,14.247918128967,141.4820098877),261647,364)
	amk.remove_spot_from_map(amk.load_variable("snp_spot_id",nil),"crlc_big")
	amk.del_variable("snp_spot_id")
end
function snp_receipt_parts2_tp1()
	kostya_dialog.delete_teleport("snp_receipt_parts2_tp1")
	alife():create("n_inventory_box_garbage3_1",vector():set(47.088665008545,18.398777008057,97.978828430176),238137,370)
end
function snp_receipt_parts2_tp2()
	kostya_dialog.delete_teleport("snp_receipt_parts2_tp2")
	snp.create_restrictor(vector():set(224.36131286621,21.13356590271,-126.86679077148),348638,401,1,"snp_spawn.snp_receipt_parts2_2")
end
function snp_receipt_parts2_2()
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ИСТОЧНИК НЕИЗВЕСТЕН:".."\\n".."%c[255,255,128,128]Прыгай.".."\n", nil, nil, 10000)
	kostya_dialog.create_teleport("snp_receipt_parts2_tp3",vector():set(224.77529907227,8.7255418300629,-129.07971191406),357233,404)
end
function snp_receipt_parts2_tp3()
	kostya_dialog.delete_teleport("snp_receipt_parts2_tp3")
	alife():create("n_inventory_box_garbage3_2",vector():set(-113.06365966797,15.895987510681,-2.6460075378418),103561,319)
end
function snp_receipt_parts2_tp4()
	kostya_dialog.delete_teleport("snp_receipt_parts2_tp4")
	snp.play_snd_rnd_ratchant()
end

function fenrir_2chaes()
	-- крыша
	local p={
		{position={x=929.79132080078,y=12.707262992859,z=277.1301574707},gv=2642,lv=246797},
		{position={x=918.73742675781,y=12.675394058228,z=277.49377441406},gv=2642,lv=243718}
	}
    local a
	for i=1,#p do
		a = p[i]
		for j=1,3 do
			alife():create("chimera_wolf",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
			alife():create("new_electro_chimera",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
			alife():create("fire_chimera",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
		end
	end
	-- периметр
	p={
		{position={x=916.52581787109,y=-0.0046860873699188,z=239.37921142578},gv=2645,lv=242799},
		{position={x=846.75170898438,y=-0.097886174917221,z=317.65158081055},gv=2656,lv=216145},
		{position={x=935.75256347656,y=-0.0031528472900391,z=316.96014404297},gv=2647,lv=248326}
	}
    local a
	for i=1,#p do
		a = p[i]
		for j=1,2 do
			alife():create("chimera_wolf",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
			alife():create("new_electro_chimera",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
			alife():create("fire_chimera",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
		end
	end
end

function snpt_mg2_lastday()
	local p={
		{position={x=-34.396327972412,y=1.0810396671295,z=69.735717773438},gv=3630,lv=317204},
		{position={x=-38.434947967529,y=1.2495057582855,z=86.062561035156},gv=3630,lv=312192},
		{position={x=-71.387405395508,y=1.2512449026108,z=97.011657714844},gv=3623,lv=275395},
		{position={x=-84.499061584473,y=2.2075884342194,z=72.954818725586},gv=3622,lv=259962},
		{position={x=-90.566299438477,y=1.5262925624847,z=52.904426574707},gv=3622,lv=254010},
		{position={x=-67.54655456543,y=2.2061457633972,z=52.38215637207},gv=3622,lv=279342},
		{position={x=-74.452072143555,y=2.7883553504944,z=64.518424987793},gv=3622,lv=272032},
		{position={x=-66.273986816406,y=2.2073051929474,z=71.704658508301},gv=3630,lv=280920}
	}
    local a
	for i=1,#p do
		a = p[i]
		for j=1,3 do
			alife():create("dcity_last_vhod_1",vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
		end
	end
	alife():create("last_snayper_shtab2",vector():set(-60.501178741455,1.2512840032578,76.947448730469),287681,3630)
end
function snpt_mg2_lider()
	snp.create_item_and_restrictor("snp_pda8",vector():set(-60.501178741455,1.2512840032578,76.947448730469),287681,3630)
end
function snpt_mg2_kontry()
	alife():create("snp_mg1",vector():set(-109.88414764404,15.624921798706,96.437660217285),231584,3609)
	alife():create("snp_mg2",vector():set(-24.832321166992,1.7363592386246,95.618133544922),329561,3630)
	alife():create("snp_mg3",vector():set(-146.62670898438,15.625978469849,69.263687133789),190558,3604)
	alife():create("snp_mg4",vector():set(-24.676187515259,7.3846478462219,84.643981933594),329520,3630)
	alife():create("snp_mg5",vector():set(-46.255477905273,16.327987670898,106.64060974121),303370,3659)
	alife():create("snp_mg6",vector():set(-93.249954223633,13.701496124268,34.205997467041),251087,3615)
	alife():create("snp_mg7",vector():set(-100.01612091064,2.1881866455078,44.518161773682),243313,3622)
	alife():create("snp_mg8",vector():set(-32.057159423828,1.2510282993317,49.591854095459),319862,3634)
	alife():create("snp_mg9",vector():set(-106.61835479736,9.2565498352051,109.28721618652),234868,3609)
end

function snp_found_vogak()
	db.actor:give_info_portion("snp_find_vogak_done")
end

function shadow_spawn()
	alife():create("n_inventory_box_limansk10",vector():set(3.3495569229126,6.5100507736206,-168.04250488281),22116,2995)
	kostya_dialog.create_teleport("snp_shadow_tp6",vector():set(-21.691339492798,-0.3657466173172,-182.68067932129),14223,2990)
end

function vesker_start_done()
	local p={
		{position={x=879.42602539063,y=6.2303853034973,z=-58.104328155518},gv=2293,lv=382547},
		{position={x=517.17449951172,y=44.874534606934,z=279.45327758789},gv=2617,lv=161537},
		{position={x=504.096876220703,y=31.760717391968,z=419.60370483398},gv=2616,lv=160066},
		{position={x=-136.70785522461,y=16.782299728394,z=-466.21514892578},gv=829,lv=20465},
		{position={x=9.950572013855,y=-2.2237491607666,z=-410.27124023438},gv=2128,lv=122755},
		{position={x=161.44822692871,y=20.329610824585,z=-197.13208007813},gv=3765,lv=371364},
		{position={x=208.0570526123,y=5.5278534889221,z=429.17282104492},gv=2580,lv=83432},
		{position={x=416.91812133789,y=36.87638092041,z=118.81635284424},gv=2601,lv=141001},
		{position={x=-374.53286743164,y=52.598415374756,z=-337.81976318359},gv=3664,lv=216059},
		{position={x=-94.535461425781,y=13.756745071411,z=-351.77433349609},gv=3753,lv=95586},
		
		{position={x=0.5203996515274,y=9.3691549301147,z=50.154319763184},gv=475,lv=239730},
		{position={x=-7.2711382865906,y=10.207906723022,z=-113.03800964355},gv=822,lv=166691},
		{position={x=-190.68890380859,y=12.757529945374,z=-236.96127319336},gv=3234,lv=2125},
		{position={x=-120.34976196289,y=21.897750854492,z=102.23420715332},gv=1322,lv=34607},
		{position={x=62.061088562012,y=7.3217902183533,z=205.11627197266},gv=2127,lv=174253},
		{position={x=-410.97888183594,y=5.4570202827454,z=21.962364196777},gv=3660,lv=161929},
		{position={x=274.06109619141,y=21.50138092041,z=310.47256469727},gv=3769,lv=469903},
		{position={x=376.97857666016,y=34.464807891846,z=-49.291799163818},gv=2,lv=582796},
		{position={x=-167.3053894043,y=10.52619934082,z=-353.35650634766},gv=3753,lv=41204},
		{position={x=-11.626491546631,y=12.816471099854,z=-28.391191482544},gv=3011,lv=16832}
	}
    local a, obj
	for i=1,#p do
		a = p[i]
		obj = alife():create("n_inventory_box_profi"..tostring(i),vector():set(a.position.x,a.position.y,a.position.z),a.lv,a.gv)
		amk.add_spot_on_map(obj.id,"profi","Тайник Вескера") 
	end

	obj = kostya_dialog.create_teleport("snp_profi_tp1",vector():set(879.42602539063,-49.568290710449,-58.104328155518),76261,2573)
	amk.add_spot_on_map(obj.id,"profi","Тайник Вескера") 
	kostya_dialog.create_teleport("snp_profi_tp4",vector():set(-130.89579772949,4.8612179756165,-469.34857177734),26583,831)
	kostya_dialog.create_teleport("snp_profi_tp5_1",vector():set(31.901151657104,5.4810729026794,-281.40832519531),141258,2269)
	kostya_dialog.create_teleport("snp_profi_tp5_2",vector():set(30.192155838013,6.2549166679382,-367.81799316406),143814,2269)
	kostya_dialog.create_teleport("snp_profi_tp6",vector():set(161.45541381836,10.114464759827,-191.73143005371),390585,3765)
	db.actor:disable_info_portion("vol_info_temp")
end

function all_letters()
	amk.start_timer("run", 0.2, "snp_spawn.all_letters_chunk()")
end
function all_letters_chunk()
	for i=1,20 do
		if not db.actor:object("snp_profi"..tostring(i)) then return end
	end
	alife():create("n_inventory_box_vp10",vector():set(98.364474487305,6.0750370025635,141.27055358887),323296,3764)
	kostya_dialog.create_teleport("snp_profi_tp0",vector():set(107.6911239624,3.9736077785492,144.8564453125),329571,3764)
	news_manager.send_tip(db.actor, "%c[255,160,160,160]".."ВЕСКЕР:".."\\n".."%c[255,255,128,128]Ну вот, ты собрал все мои тайники. И в итоге у тебя есть все записки с одной буквой в каждой. Собери из этих букв фразу из трех слов, и эта фраза скажет тебе, где искать мой финальный тайник, в котором лежит последний и самый лучший сюрприз для тебя, "..user_name().."! Подсказка: все слова начинаются с большой буквы. Удачи!".."\n", 3, nil, 50000)
end
